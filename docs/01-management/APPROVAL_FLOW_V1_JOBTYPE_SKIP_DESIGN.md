# Approval Flow V1 + Job Type Skip Design
## à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸à¸²à¸£à¸‚à¹‰à¸²à¸¡à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸•à¸²à¸¡à¸›à¸£à¸°à¹€à¸ à¸—à¸‡à¸²à¸™ (Job Type)

---

## ğŸ‡¹ğŸ‡­ à¸ à¸²à¸©à¸²à¹„à¸—à¸¢

### 1. à¸ à¸²à¸à¸£à¸§à¸¡ (Overview)

à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸­à¸˜à¸´à¸šà¸²à¸¢à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸š UI/UX à¹à¸¥à¸°à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š Approval Flow V1 à¸—à¸µà¹ˆà¸‚à¸¢à¸²à¸¢à¸„à¸§à¸²à¸¡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸«à¹‰à¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² **"à¸‚à¹‰à¸²à¸¡à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ (Skip Approval)"** à¹à¸¢à¸à¸•à¸²à¸¡à¸›à¸£à¸°à¹€à¸ à¸—à¸‡à¸²à¸™ (Job Type) à¹ƒà¸™à¹à¸•à¹ˆà¸¥à¸°à¹‚à¸„à¸£à¸‡à¸à¸²à¸£ (Project)

### 2. à¸›à¸±à¸à¸«à¸²à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚ (Problem Statement)

**à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™:**
- Approval Flow à¸œà¸¹à¸à¸à¸±à¸š Project à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸”à¸µà¸¢à¸§
- à¸—à¸¸à¸ Job Type à¹ƒà¸™ Project à¹ƒà¸Šà¹‰ Flow à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸™
- à¸‡à¸²à¸™à¸šà¸²à¸‡à¸›à¸£à¸°à¹€à¸ à¸—à¸—à¸µà¹ˆà¸„à¸§à¸£à¹€à¸£à¹ˆà¸‡à¸”à¹ˆà¸§à¸™à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸£à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ à¸à¹‡à¸¢à¸±à¸‡à¸•à¹‰à¸­à¸‡à¸œà¹ˆà¸²à¸™à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¹€à¸”à¸´à¸¡

**à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£:**
- à¸‡à¸²à¸™à¸›à¸£à¸°à¹€à¸ à¸— "à¸”à¹ˆà¸§à¸™" à¹€à¸Šà¹ˆà¸™ Banner à¸ªà¸²à¸¡à¸²à¸£à¸–à¸‚à¹‰à¸²à¸¡à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¹„à¸”à¹‰
- à¸‡à¸²à¸™à¸›à¸à¸•à¸´ à¹€à¸Šà¹ˆà¸™ Video à¸•à¹‰à¸­à¸‡à¸œà¹ˆà¸²à¸™à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸•à¸²à¸¡à¸›à¸à¸•à¸´
- à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹„à¸”à¹‰à¹ƒà¸™ Project à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸™

### 3. à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Data Structure)

#### 3.1 Database Schema

```sql
à¸•à¸²à¸£à¸²à¸‡: approval_flows
â”œâ”€ id (PK)
â”œâ”€ project_id (FK) - à¸£à¸«à¸±à¸ªà¹‚à¸„à¸£à¸‡à¸à¸²à¸£
â”œâ”€ job_type_id (FK, nullable) - à¸£à¸«à¸±à¸ªà¸›à¸£à¸°à¹€à¸ à¸—à¸‡à¸²à¸™ (à¹ƒà¸«à¸¡à¹ˆ)
â”œâ”€ skip_approval (boolean, default: false) - à¸‚à¹‰à¸²à¸¡à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ (à¹ƒà¸«à¸¡à¹ˆ)
â”œâ”€ auto_assign_type (varchar) - à¸›à¸£à¸°à¹€à¸ à¸—à¸à¸²à¸£à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢ (à¹ƒà¸«à¸¡à¹ˆ)
â”‚   â””â”€ à¸„à¹ˆà¸²à¸—à¸µà¹ˆà¹„à¸”à¹‰: 'manual', 'dept_manager', 'team_lead', 'specific_user'
â”œâ”€ auto_assign_user_id (int, nullable) - à¸œà¸¹à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¹€à¸‰à¸à¸²à¸° (à¹ƒà¸«à¸¡à¹ˆ)
â”œâ”€ include_team_lead (boolean)
â”œâ”€ team_lead_id (FK, nullable)
â””â”€ is_active (boolean)

Index: idx_project_jobtype (project_id, job_type_id) - (à¹ƒà¸«à¸¡à¹ˆ)
```

#### 3.2 Priority à¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸² Flow

```
Priority 1: (project_id + job_type_id) à¹€à¸‰à¸à¸²à¸°à¹€à¸ˆà¸²à¸°à¸ˆà¸‡
    â†“ à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸à¸š
Priority 2: (project_id + job_type_id IS NULL) à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸‚à¸­à¸‡ Project
    â†“ à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸à¸š
Priority 3: à¹ƒà¸Šà¹‰à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸£à¸°à¸šà¸š (à¸•à¹‰à¸­à¸‡à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ 1 à¸£à¸°à¸”à¸±à¸š)
```

### 4. à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸«à¸™à¹‰à¸²à¸ˆà¸­ (UI Design)

#### 4.1 à¸«à¸™à¹‰à¸²à¸£à¸²à¸¢à¸à¸²à¸£ Project (Project List)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ Project: SENA Online                â”‚
â”‚    à¹à¸œà¸™à¸: Marketing                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ ğŸ·ï¸ Flow Configurations (3 types):     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸŸ¢ Default (à¸—à¸¸à¸ Job Type)         â”‚ â”‚
â”‚ â”‚    â””â”€ 2 Levels (à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´)          â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â”‚ âš¡ Banner                          â”‚ â”‚
â”‚ â”‚    â””â”€ Skip (Auto â†’ à¸«à¸±à¸§à¸«à¸™à¹‰à¸²à¹à¸œà¸™à¸)   â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â”‚ âš¡ Poster                          â”‚ â”‚
â”‚ â”‚    â””â”€ Skip (Manual)               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚ [âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Flow]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Badge à¸ªà¸–à¸²à¸™à¸°:**
- ğŸŸ¢ **Default** - à¹ƒà¸Šà¹‰à¸à¸±à¸šà¸—à¸¸à¸ Job Type à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸£à¸°à¸šà¸¸
- âš¡ **Skip** - à¸‚à¹‰à¸²à¸¡à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´
- â³ **N Levels** - à¸•à¹‰à¸­à¸‡à¸œà¹ˆà¸²à¸™à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ N à¸£à¸°à¸”à¸±à¸š

#### 4.2 à¸«à¸™à¹‰à¸²à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Flow (Flow Configuration)

**à¸ªà¹ˆà¸§à¸™à¸—à¸µà¹ˆ 1: Job Type Selector**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ à¹€à¸¥à¸·à¸­à¸à¸›à¸£à¸°à¹€à¸ à¸—à¸‡à¸²à¸™ (Job Type)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â—‹ à¸—à¸¸à¸à¸›à¸£à¸°à¹€à¸ à¸—à¸‡à¸²à¸™ (Default)                              â”‚
â”‚                                                         â”‚
â”‚  â— Banner (à¸›à¹‰à¸²à¸¢à¹‚à¸†à¸©à¸“à¸²)                    [ğŸ—‘ï¸ à¸¥à¸š]      â”‚
â”‚  â—‹ Poster (à¹‚à¸›à¸ªà¹€à¸•à¸­à¸£à¹Œ)                                   â”‚
â”‚  â—‹ Social Media                                        â”‚
â”‚  â—‹ Video                                               â”‚
â”‚  â—‹ Logo                                                â”‚
â”‚                                                         â”‚
â”‚  [â• à¹€à¸à¸´à¹ˆà¸¡à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Job Type]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**à¸ªà¹ˆà¸§à¸™à¸—à¸µà¹ˆ 2: Skip Approval Toggle**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš™ï¸ à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  â˜‘ï¸ à¸‚à¹‰à¸²à¸¡à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ (Skip Approval)              â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚     à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸›à¸´à¸” à¸‡à¸²à¸™à¸ˆà¸°à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸œà¹ˆà¸²à¸™à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¹ƒà¸”à¹†   â”‚   â”‚
â”‚  â”‚     à¹à¸¥à¸°à¸ˆà¸°à¸ªà¹ˆà¸‡à¸•à¸£à¸‡à¹„à¸›à¸¢à¸±à¸‡à¸œà¸¹à¹‰à¸£à¸±à¸šà¸œà¸´à¸”à¸Šà¸­à¸šà¸—à¸±à¸™à¸—à¸µ        â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚
â”‚                                                         â”‚
â”‚  [à¹€à¸¡à¸·à¹ˆà¸­ Skip Approval = FALSE]                         â”‚
â”‚                                                         â”‚
â”‚  ğŸ‘¥ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´:                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Level 1: [à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´ â–¼]          [ğŸ—‘ï¸]         â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Level 2: [à¸„à¸¸à¸“à¸­à¸²à¸£à¸µà¸¢à¹Œ â–¼]          [ğŸ—‘ï¸]         â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  [â• à¹€à¸à¸´à¹ˆà¸¡ Level]                               â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**à¸ªà¹ˆà¸§à¸™à¸—à¸µà¹ˆ 3: Auto-Assign Configuration**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¸‡à¸²à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´ (à¹€à¸¡à¸·à¹ˆà¸­à¸‚à¹‰à¸²à¸¡à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢:                                        â”‚
â”‚                                                         â”‚
â”‚  â—‹ à¸à¸³à¸«à¸™à¸”à¹€à¸­à¸‡ (Manual)                                   â”‚
â”‚    â””â”€ à¸£à¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¹€à¸­à¸‡                          â”‚
â”‚                                                         â”‚
â”‚  â— à¸«à¸±à¸§à¸«à¸™à¹‰à¸²à¹à¸œà¸™à¸à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹€à¸›à¸´à¸”à¸‡à¸²à¸™ (Dept Manager)            â”‚
â”‚    â””â”€ à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¹ƒà¸«à¹‰à¸«à¸±à¸§à¸«à¸™à¹‰à¸²à¹à¸œà¸™à¸à¸‚à¸­à¸‡à¸„à¸™à¹€à¸›à¸´à¸”à¸‡à¸²à¸™à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´      â”‚
â”‚                                                         â”‚
â”‚  â—‹ Team Lead                                           â”‚
â”‚    â””â”€ [à¹€à¸¥à¸·à¸­à¸ Team Lead â–¼]                              â”‚
â”‚                                                         â”‚
â”‚  â—‹ à¸šà¸¸à¸„à¸„à¸¥à¹€à¸‰à¸à¸²à¸° (Specific User)                         â”‚
â”‚    â””â”€ [à¸„à¹‰à¸™à¸«à¸²à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ â–¼]                                  â”‚
â”‚       â””â”€ ğŸ‘¤ à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´ à¸—à¸µà¸¡ Graphic                      â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.3 à¸«à¸™à¹‰à¸²à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ Workflow (Preview)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ï¸ à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ Workflow                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ğŸ“ Project: SENA Online                                â”‚
â”‚  ğŸ“‹ Job Type: Banner                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                         â”‚
â”‚  à¸œà¸¹à¹‰à¹€à¸›à¸´à¸”à¸‡à¸²à¸™ (Requester)                                â”‚
â”‚       â”‚                                                 â”‚
â”‚       â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚  â­ï¸ à¸‚à¹‰à¸²à¸¡    â”‚  âš¡ Skip Approval                      â”‚
â”‚  â”‚  Approval   â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚  ğŸ‘¤ à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢ â”‚  â†’ à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´ (à¸«à¸±à¸§à¸«à¸™à¹‰à¸²à¹à¸œà¸™à¸)           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚     ğŸš€ à¹€à¸£à¸´à¹ˆà¸¡à¸—à¸³à¸‡à¸²à¸™                                       â”‚
â”‚                                                         â”‚
â”‚  â±ï¸ à¸›à¸£à¸°à¸«à¸¢à¸±à¸”à¹€à¸§à¸¥à¸²: ~1-2 à¸§à¸±à¸™ (à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸£à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´)          â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š (System Workflow)

#### 5.1 à¸•à¸­à¸™à¸ªà¸£à¹‰à¸²à¸‡à¸‡à¸²à¸™ (Create Job)

```
[Requester à¸ªà¸£à¹‰à¸²à¸‡à¸‡à¸²à¸™]
         â”‚
         â–¼
[à¸£à¸°à¸šà¸šà¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Job Type]
         â”‚
         â–¼
[à¸„à¹‰à¸™à¸«à¸² Flow Assignment]
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Found â”‚  â”‚ Not Foundâ”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚
    â–¼           â–¼
[à¸”à¸¹à¸„à¹ˆà¸² skip_approval]
    â”‚
    â”œâ”€ TRUE  â†’ [à¸‚à¹‰à¸²à¸¡ Approval] â†’ [à¸«à¸² Assignee] â†’ [à¸ªà¸–à¸²à¸™à¸°: Assigned]
    â”‚
    â””â”€ FALSE â†’ [à¸ªà¸–à¸²à¸™à¸°: Pending Approval] â†’ [à¸£à¸­à¸œà¹ˆà¸²à¸™ Levels]
```

#### 5.2 Logic à¸à¸²à¸£à¸«à¸² Assignee (Auto-Assign)

```javascript
if (skip_approval === true) {
    switch (auto_assign_type) {
        case 'manual':
            assignee_id = null; // à¸£à¸­ Admin à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢
            status = 'approved';
            break;
            
        case 'dept_manager':
            assignee_id = get_manager_of(requester.department_id);
            status = 'assigned';
            break;
            
        case 'team_lead':
            assignee_id = flow.team_lead_id;
            status = 'assigned';
            break;
            
        case 'specific_user':
            assignee_id = flow.auto_assign_user_id;
            status = 'assigned';
            break;
    }
}
```

### 6. à¸à¸à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™ (Business Rules)

| à¸à¸ | à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” |
|----|-----------|
| **BR-001** | à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸¡à¸µ Flow à¸ªà¸³à¸«à¸£à¸±à¸š Job Type à¹€à¸‰à¸à¸²à¸° à¹ƒà¸«à¹‰à¹ƒà¸Šà¹‰ Default Flow à¸‚à¸­à¸‡ Project |
| **BR-002** | à¸–à¹‰à¸² Skip Approval = TRUE à¸•à¹‰à¸­à¸‡à¹€à¸¥à¸·à¸­à¸ Auto-Assign Type à¸”à¹‰à¸§à¸¢ |
| **BR-003** | à¸–à¹‰à¸² Skip Approval = FALSE à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 1 Approval Level |
| **BR-004** | à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¡à¸µà¸‹à¹‰à¸³à¹„à¸”à¹‰: (project_id, job_type_id) à¸•à¹‰à¸­à¸‡ Unique |
| **BR-005** | Job Type = NULL à¸„à¸·à¸­ Default Flow à¸ªà¸³à¸«à¸£à¸±à¸š Project |
| **BR-006** | à¸à¸²à¸£à¸¥à¸š Default Flow à¸•à¹‰à¸­à¸‡à¸¡à¸µ Confirmation (à¸­à¸²à¸ˆà¸à¸£à¸°à¸—à¸šà¸‡à¸²à¸™à¹€à¸”à¸´à¸¡) |

### 7. à¸ªà¸–à¸²à¸™à¸°à¸‡à¸²à¸™ (Job Status Flow)

#### 7.1 à¹à¸šà¸š Skip Approval (skip_approval = TRUE)

```
Draft â†’ Submitted â†’ Approved â†’ Assigned â†’ In Progress â†’ Completed
                (Auto)        (Auto)
```

#### 7.2 à¹à¸šà¸šà¸¡à¸µ Approval (skip_approval = FALSE)

```
Draft â†’ Submitted â†’ Pending Approval â†’ Level 1 â†’ Level 2 â†’ Approved
                                              (à¸–à¹‰à¸²à¸¡à¸µ)
                                                        â†“
                                                  Assigned â†’ In Progress â†’ Completed
```

### 8. à¸‚à¹‰à¸­à¸„à¸§à¸£à¸£à¸°à¸§à¸±à¸‡ (Considerations)

#### 8.1 Backward Compatibility
- Project à¸—à¸µà¹ˆà¸¡à¸µ Flow à¹€à¸”à¸´à¸¡ (à¹„à¸¡à¹ˆà¸¡à¸µ Job Type) à¸•à¹‰à¸­à¸‡à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡
- Default Flow (job_type_id = NULL) à¸•à¹‰à¸­à¸‡à¸¡à¸µà¹€à¸ªà¸¡à¸­à¸ªà¸³à¸«à¸£à¸±à¸š Project à¸—à¸µà¹ˆà¸¡à¸µ Flow

#### 8.2 Performance
- à¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡ Index (project_id, job_type_id) à¹€à¸à¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§à¹ƒà¸™à¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²
- Cache Flow Config à¹„à¸§à¹‰à¹ƒà¸™ Memory à¸«à¸£à¸·à¸­ Redis

#### 8.3 Audit Trail
- à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Flow (à¹ƒà¸„à¸£à¹à¸à¹‰ à¹€à¸¡à¸·à¹ˆà¸­à¹„à¸«à¸£à¹ˆ)
- à¸šà¸±à¸™à¸—à¸¶à¸à¸§à¹ˆà¸²à¸‡à¸²à¸™à¸™à¸µà¹‰à¸‚à¹‰à¸²à¸¡ Approval à¹€à¸à¸£à¸²à¸°à¸­à¸°à¹„à¸£

### 9. à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ Use Cases

#### UC-001: à¸‡à¸²à¸™ Banner à¸”à¹ˆà¸§à¸™à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´
```
Project: SENA Online
Job Type: Banner
Setting: skip_approval = TRUE, auto_assign = 'dept_manager'

à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:
- Marketing à¹€à¸›à¸´à¸”à¸‡à¸²à¸™ Banner
- à¸‡à¸²à¸™à¸–à¸¹à¸à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¹ƒà¸«à¹‰à¸«à¸±à¸§à¸«à¸™à¹‰à¸²à¹à¸œà¸™à¸ Marketing à¸—à¸±à¸™à¸—à¸µ
- à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸£à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸ˆà¸²à¸à¸œà¸¹à¹‰à¸šà¸£à¸´à¸«à¸²à¸£
- à¸›à¸£à¸°à¸«à¸¢à¸±à¸”à¹€à¸§à¸¥à¸² 1-2 à¸§à¸±à¸™
```

#### UC-002: à¸‡à¸²à¸™ Video à¸•à¹‰à¸­à¸‡à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ 2 à¸£à¸°à¸”à¸±à¸š
```
Project: SENA Online
Job Type: Video
Setting: skip_approval = FALSE, levels = [Manager, Director]

à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:
- Marketing à¹€à¸›à¸´à¸”à¸‡à¸²à¸™ Video
- à¸ªà¸–à¸²à¸™à¸°: Pending Approval
- à¸•à¹‰à¸­à¸‡à¸œà¹ˆà¸²à¸™ Manager à¸à¹ˆà¸­à¸™ â†’ à¹à¸¥à¹‰à¸§à¸–à¸¶à¸‡ Director
- à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸„à¸£à¸šà¸ˆà¸¶à¸‡à¸ˆà¸°à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¹ƒà¸«à¹‰ Assignee
```

---

## ğŸ‡¬ğŸ‡§ English

### 1. Overview

This document describes the UI/UX design and workflow of the Approval Flow V1 system, extended to support **"Skip Approval"** configuration per Job Type within each Project.

### 2. Problem Statement

**Current State:**
- Approval Flow is bound to Project only
- All Job Types in a Project use the same Flow
- Some urgent Job Types (e.g., Banner) still need to go through the same approval process

**Requirements:**
- "Urgent" Job Types like Banner can skip approval
- Normal Job Types like Video must follow standard approval
- Both can coexist in the same Project

### 3. Data Structure

#### 3.1 Database Schema

```sql
Table: approval_flows
â”œâ”€ id (PK)
â”œâ”€ project_id (FK)
â”œâ”€ job_type_id (FK, nullable) - NEW
â”œâ”€ skip_approval (boolean, default: false) - NEW
â”œâ”€ auto_assign_type (varchar) - NEW
â”‚   â””â”€ values: 'manual', 'dept_manager', 'team_lead', 'specific_user'
â”œâ”€ auto_assign_user_id (int, nullable) - NEW
â”œâ”€ include_team_lead (boolean)
â”œâ”€ team_lead_id (FK, nullable)
â””â”€ is_active (boolean)

Index: idx_project_jobtype (project_id, job_type_id) - NEW
```

#### 3.2 Flow Resolution Priority

```
Priority 1: (project_id + job_type_id) Specific match
    â†“ if not found
Priority 2: (project_id + job_type_id IS NULL) Project Default
    â†“ if not found
Priority 3: System default (requires approval)
```

### 4. UI Design

#### 4.1 Project List Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ Project: SENA Online                â”‚
â”‚    Department: Marketing               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ ğŸ·ï¸ Flow Configurations (3 types):     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸŸ¢ Default (All Job Types)        â”‚ â”‚
â”‚ â”‚    â””â”€ 2 Levels (Approval)         â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â”‚ âš¡ Banner                          â”‚ â”‚
â”‚ â”‚    â””â”€ Skip (Auto â†’ Dept Manager)  â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â”‚ âš¡ Poster                          â”‚ â”‚
â”‚ â”‚    â””â”€ Skip (Manual)               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚ [âš™ï¸ Configure Flow]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Status Badges:**
- ğŸŸ¢ **Default** - Applied to all Job Types not specified
- âš¡ **Skip** - Skip approval
- â³ **N Levels** - Requires N approval levels

#### 4.2 Flow Configuration Page

**Section 1: Job Type Selector**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ Select Job Type                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â—‹ All Job Types (Default)                             â”‚
â”‚                                                         â”‚
â”‚  â— Banner                                              â”‚
â”‚  â—‹ Poster                                              â”‚
â”‚  â—‹ Social Media                                        â”‚
â”‚  â—‹ Video                                               â”‚
â”‚  â—‹ Logo                                                â”‚
â”‚                                                         â”‚
â”‚  [â• Add Job Type Configuration]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Section 2: Skip Approval Toggle**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš™ï¸ Approval Settings                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  â˜‘ï¸ Skip Approval                               â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚     When enabled, jobs will bypass all        â”‚   â”‚
â”‚  â”‚     approval steps and go directly to         â”‚   â”‚
â”‚  â”‚     the assignee                              â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚
â”‚                                                         â”‚
â”‚  [When Skip Approval = FALSE]                          â”‚
â”‚                                                         â”‚
â”‚  ğŸ‘¥ Approval Steps:                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Level 1: [Select Approver â–¼]   [ğŸ—‘ï¸]         â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  Level 2: [Select Approver â–¼]   [ğŸ—‘ï¸]         â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  [â• Add Level]                                â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Section 3: Auto-Assign Configuration**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ Auto-Assignment (When Skip Approval is enabled)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Assignment Method:                                    â”‚
â”‚                                                         â”‚
â”‚  â—‹ Manual                                              â”‚
â”‚    â””â”€ Wait for admin to assign manually                â”‚
â”‚                                                         â”‚
â”‚  â— Department Manager                                  â”‚
â”‚    â””â”€ Auto-assign to requester's department manager    â”‚
â”‚                                                         â”‚
â”‚  â—‹ Team Lead                                           â”‚
â”‚    â””â”€ [Select Team Lead â–¼]                             â”‚
â”‚                                                         â”‚
â”‚  â—‹ Specific User                                       â”‚
â”‚    â””â”€ [Search User â–¼]                                  â”‚
â”‚       â””â”€ ğŸ‘¤ John Doe (Graphic Team)                    â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.3 Workflow Preview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ï¸ Workflow Preview                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ğŸ“ Project: SENA Online                                â”‚
â”‚  ğŸ“‹ Job Type: Banner                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                         â”‚
â”‚  Requester                                             â”‚
â”‚       â”‚                                                 â”‚
â”‚       â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚  â­ï¸ Skip    â”‚  âš¡ Skip Approval                      â”‚
â”‚  â”‚  Approval   â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚  ğŸ‘¤ Assign  â”‚  â†’ John Doe (Dept Manager)            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚     ğŸš€ Start Working                                   â”‚
â”‚                                                         â”‚
â”‚  â±ï¸ Time saved: ~1-2 days (no approval wait)           â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. System Workflow

#### 5.1 Job Creation Flow

```
[Requester creates job]
         â”‚
         â–¼
[System checks Job Type]
         â”‚
         â–¼
[Find Flow Assignment]
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Found â”‚  â”‚ Not Foundâ”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚
    â–¼           â–¼
[Check skip_approval]
    â”‚
    â”œâ”€ TRUE  â†’ [Skip Approval] â†’ [Find Assignee] â†’ [Status: Assigned]
    â”‚
    â””â”€ FALSE â†’ [Status: Pending Approval] â†’ [Go through Levels]
```

#### 5.2 Auto-Assign Logic

```javascript
if (skip_approval === true) {
    switch (auto_assign_type) {
        case 'manual':
            assignee_id = null; // Wait for admin
            status = 'approved';
            break;
            
        case 'dept_manager':
            assignee_id = get_manager_of(requester.department_id);
            status = 'assigned';
            break;
            
        case 'team_lead':
            assignee_id = flow.team_lead_id;
            status = 'assigned';
            break;
            
        case 'specific_user':
            assignee_id = flow.auto_assign_user_id;
            status = 'assigned';
            break;
    }
}
```

### 6. Business Rules

| Rule | Description |
|------|-------------|
| **BR-001** | If no specific Flow for Job Type, use Project Default |
| **BR-002** | If Skip Approval = TRUE, must select Auto-Assign Type |
| **BR-003** | If Skip Approval = FALSE, must have at least 1 Approval Level |
| **BR-004** | Duplicate not allowed: (project_id, job_type_id) must be Unique |
| **BR-005** | Job Type = NULL means Default Flow for the Project |
| **BR-006** | Deleting Default Flow requires confirmation (may affect existing jobs) |

### 7. Job Status Flow

#### 7.1 With Skip Approval (skip_approval = TRUE)

```
Draft â†’ Submitted â†’ Approved â†’ Assigned â†’ In Progress â†’ Completed
                (Auto)        (Auto)
```

#### 7.2 With Approval (skip_approval = FALSE)

```
Draft â†’ Submitted â†’ Pending Approval â†’ Level 1 â†’ Level 2 â†’ Approved
                                              (if any)
                                                        â†“
                                                  Assigned â†’ In Progress â†’ Completed
```

### 8. Considerations

#### 8.1 Backward Compatibility
- Projects with existing Flow (no Job Type) must work as before
- Default Flow (job_type_id = NULL) must always exist for Projects with Flow

#### 8.2 Performance
- Create Index (project_id, job_type_id) for fast lookup
- Cache Flow Config in Memory or Redis

#### 8.3 Audit Trail
- Log Flow configuration changes (who, when)
- Log that a job skipped approval and why

---



## ğŸ‘¥ Stakeholders

- **Product Owner**: [Name]
- **UX/UI Designer**: [Name]
- **System Analyst**: [Name]
- **Tech Lead**: [Name]
- **QA Lead**: [Name]

---

## âœ… Approval

| Role | Name | Signature | Date |
|------|------|-----------|------|
| Product Owner | | | |
| System Analyst | | | |
| Tech Lead | | | |
