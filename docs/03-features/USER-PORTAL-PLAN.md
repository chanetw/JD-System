# User Portal & Workflow Plan
**Objective:** ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (Requester) ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Approver) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Admin Dashboard ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô

## 1. User Flow (‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)

### A. Login Logic
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Role ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏≤‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°:
1. **Login Success**
2. **Check Role:**
   - **Admin / Staff / Assignee (‡∏Ñ‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô):** ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `Dashboard` (‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)
   - **Requester / Approver (‡∏Ñ‡∏ô‡∏™‡∏±‡πà‡∏á/‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥):** ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `User Portal` (‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•)
   - *‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: Admin ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏î "Switch to Portal" ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å Header*

### B. Portal Use Cases
1. **Approver (‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥):**
   - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏´‡πá‡∏ô **"‡∏á‡∏≤‡∏ô‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥" (Pending Approvals)** ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
   - ‡∏Å‡∏î‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏•‡∏∞‡∏Å‡∏î Approve/Reject ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏ô
2. **Requester (‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô):**
   - ‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ **"‡∏á‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô" (My Active Lists)**
   - ‡∏Å‡∏î **"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà"** ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏° Quick Actions
   - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å Media Portal

---

## 2. UI Layout (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠)

### Zone 1: Header & Navigation
- Logo DJ System
- Search Bar (Global Search)
- User Profile & Logout

### Zone 2: Hero Section (Greeting & Search)
> **"‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≤‡∏ô‡∏ï‡πå, ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏á‡∏≤‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ?"**
> [ ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏á‡∏≤‡∏ô‡∏î‡πà‡∏ß‡∏ô... ]

### Zone 3: üî¥ Urgent / Pending Approvals (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
*‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥*
**‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (3)**
| Job ID | ‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô | ‡∏ú‡∏π‡πâ‡∏Ç‡∏≠ | ‡∏ß‡∏±‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á | Action |
| :--- | :--- | :--- | :--- | :--- |
| DJ-2402-001 | Key Visual Project A | ‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á | 25 Feb (‡∏≠‡∏µ‡∏Å 2 ‡∏ß‡∏±‡∏ô) | [‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥] |
| DJ-2402-005 | Social Post B | ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ | 28 Feb | [‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥] |

### Zone 4: Quick Actions (‡πÄ‡∏°‡∏ô‡∏π‡∏•‡∏±‡∏î)
- [ + ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà ] (‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏ç‡πà ‡πÄ‡∏î‡πà‡∏ô‡∏™‡∏∏‡∏î)
- [ üìÇ Media Portal ] (‡∏Ñ‡∏•‡∏±‡∏á‡πÑ‡∏ü‡∏•‡πå)
- [ üìä ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô ]
- [ üïí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö SLA ]

### Zone 5: My Recent Requests (‡∏á‡∏≤‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°)
**‡∏á‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ç‡∏≠‡πÑ‡∏õ**
- **In Progress:** Banner Website Project X (Graphics ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥)
- **Draft:** Brochure Project Y (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡πà‡∏á)
- **Completed:** Video Project Z (‡∏Å‡∏î‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢)

---

## 3. Implementation Process (‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤)

### Phase 1: Backend Update (API)
- [ ] **Modify `GET /api/jobs`**:
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° Logic ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö `role=approver`
  - ‡πÉ‡∏´‡πâ Query ‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á `Approvals` ‡∏ó‡∏µ‡πà `approver_id = current_user` ‡πÅ‡∏•‡∏∞ `status = pending`
  - *‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô‡∏á‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó*

### Phase 2: React Component (UserPortal)
- [ ] **Create `PendingApprovalSection.jsx`**:
  - Fetch API: `/api/jobs?role=approver&status=waiting`
  - ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏ö‡∏ö Card ‡∏´‡∏£‡∏∑‡∏≠ Table ‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡πâ‡∏ô‡∏õ‡∏∏‡πà‡∏° Action
- [ ] **Update `UserPortal.jsx`**:
  - ‡∏ô‡∏≥ Section ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÅ‡∏ó‡∏£‡∏Å‡πÑ‡∏ß‡πâ‡πÉ‡∏ï‡πâ Hero Section
  - ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á `MyRecentJobs` ‡πÉ‡∏´‡πâ‡∏î‡∏∂‡∏á `role=requester`

### Phase 3: Routing & Redirect
- [ ] **Update `LoginReal.jsx`**:
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° Logic `if (!user.roles.includes('admin')) navigate('/user-portal')`
- [ ] **Update `routes.js`**:
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `ProtectedRoute` ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Portal ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å Role

---

## 4. API Specification (Technical)

**Request: Get My Pending Approvals**
```http
GET /api/jobs?role=approver&status=pending_approval
Authorization: Bearer <token>
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": 105,
      "djId": "DJ-2402-001",
      "subject": "Key Visual Launch",
      "status": "pending_approval",
      "priority": "normal",
      "requester": { "name": "Somying", "avatar": "..." },
      "approvalStep": 1,
      "totalSteps": 2
    }
  ]
}
```
