# System Analysis: User V1 vs V2 Unification Risk
**Date:** 2026-02-11
**Author:** Senior System Analyst (SA)

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö User Management ‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏™‡πà‡∏ß‡∏ô (V1 ‡πÅ‡∏•‡∏∞ V2) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤ **"‡∏Ñ‡∏ß‡∏£‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏° ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡πÑ‡∏ß‡πâ"**

---

## 1. ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (Current State Analysis)

| Feature | System V1 (New Core) | System V2 (Legacy) |
| :--- | :--- | :--- |
| **Database Table** | `users`, `user_roles` | `v2_users`, `v2_roles` |
| **Active Codebase** | Auth (Register/Login), Jobs, Approvals | Admin User List, Admin Role Mgmt |
| **New Data (Registration)** | ‚úÖ **‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤** | üõë **‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏¥‡πà‡∏á (Frozen)** ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà |
| **Technology** | Prisma ORM (Modern) | Sequelize (Legacy) |
| **User Count** | ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ | ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà (31 ‡∏Ñ‡∏ô) |

---

## 2. ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á (Options & Risk Analysis)

### Option A: ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÑ‡∏ß‡πâ‡πÅ‡∏ö‡∏ö Hybrid (‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô)
‡∏Ñ‡∏∑‡∏≠‡∏™‡∏†‡∏≤‡∏û‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: Login ‡∏ú‡πà‡∏≤‡∏ô V1 ‡πÅ‡∏ï‡πà Admin ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô V2
*   **üî¥ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å (Critical):**
    *   **Data Silo:** Admin **"‡∏ï‡∏≤‡∏ö‡∏≠‡∏î"** ‡∏°‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô User ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏•‡∏¢ (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏õ V1 ‡πÅ‡∏ï‡πà Admin ‡∏î‡∏π V2)
    *   **Security:** ‡∏Å‡∏≤‡∏£ Block User ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Admin (V2) ‡∏à‡∏∞ **‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•** ‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£ Login ‡∏à‡∏£‡∏¥‡∏á (V1)
    *   **Maintenance:** ‡∏ó‡∏µ‡∏° Dev ‡∏™‡∏±‡∏ö‡∏™‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡∏ö‡∏±‡πä‡∏Å 2 ‡∏ó‡∏µ‡πà (‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏Å‡πâ Logic User ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡∏ó‡∏±‡πâ‡∏á V1/V2)
*   **‚úÖ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:** ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏á‡πÅ‡∏£‡∏á‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ

### Option B: ‡∏¢‡∏∂‡∏î V2 ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å (Rollback)
‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î Auth ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ `v2_users`
*   **üî¥ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á:**
    *   **Technical Debt:** `v2_users` ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡πà‡∏≤ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡πÄ‡∏ó‡πà‡∏≤ V1
    *   **Compatibility:** ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡πÜ (Jobs, Approval Flow) ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö `users` (V1) ‡πÑ‡∏õ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏´‡∏≤‡∏Å‡πÅ‡∏Å‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∑‡πâ‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏Å
*   **‚úÖ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:** ‡∏´‡∏ô‡πâ‡∏≤ Admin ‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

### Option C: ‡∏¢‡∏∂‡∏î V1 ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å (Unify to V1) **[RECOMMENDED]** üåü
‡∏Ñ‡∏∑‡∏≠‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ 31 ‡∏Ñ‡∏ô‡∏°‡∏≤ V1 ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Admin ‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏ä‡∏µ‡πâ‡∏ó‡∏µ‡πà V1 ‡πÅ‡∏ó‡∏ô
*   **üî¥ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á:**
    *   **Development Effort:** ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î `UserService.ts` ‡πÅ‡∏•‡∏∞ `index.js` ‡∏ù‡∏±‡πà‡∏á Admin ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏¥‡∏Å‡πÉ‡∏ä‡πâ `v2_models`
    *   **Role Mapping:** ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏π‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á Role ID (V2) -> Role Name (V1) ‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å
*   **‚úÖ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:**
    *   **Single Source of Truth:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• User ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß Admin ‡πÄ‡∏´‡πá‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á
    *   **Future Proof:** ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡πÜ ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï
    *   **Clean Code:** ‡∏•‡∏ö Code/Table ‡∏Ç‡∏¢‡∏∞‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏î‡πâ ‡∏•‡∏î‡∏†‡∏≤‡∏£‡∏∞‡∏î‡∏π‡πÅ‡∏•

---

## 3. ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡πá‡∏ô (SA Recommendation)

**‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö:** "‡∏ó‡∏≥ V1 ‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏¥‡πâ‡∏á V2 ‡∏ã‡∏∞"

‡∏ú‡∏°‡∏Ç‡∏≠‡∏ü‡∏±‡∏ô‡∏ò‡∏á‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏∞ SA ‡∏ß‡πà‡∏≤ **"‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô (Unify)"** ‡πÇ‡∏î‡∏¢‡∏î‡πà‡∏ß‡∏ô ‡πÅ‡∏•‡∏∞ **"‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡πá‡∏ö V1 ‡πÑ‡∏ß‡πâ"** ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•:
1.  **V1 ‡∏Ñ‡∏∑‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï:** ‡∏£‡∏∞‡∏ö‡∏ö Core ‡∏´‡∏•‡∏±‡∏Å (Jobs, Auth) ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ V1 ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ V2 ‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
2.  **V2 ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏î‡∏µ‡∏ï‡∏ó‡∏µ‡πà‡∏ï‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏¥‡πà‡∏á ‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡πà‡∏≤‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Requirement ‡πÉ‡∏´‡∏°‡πà

### ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ (Action Plan)
1.  **Migrate Data:** ‡∏¢‡πâ‡∏≤‡∏¢ User 31 ‡∏Ñ‡∏ô‡∏à‡∏≤‡∏Å `v2_users` -> `users` (V1)
2.  **Refactor Admin:** ‡πÅ‡∏Å‡πâ `UserService.ts` ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏¥‡∏Å‡∏≠‡πà‡∏≤‡∏ô `v2_users` ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡∏≤‡∏≠‡πà‡∏≤‡∏ô `users` (V1) ‡∏ú‡πà‡∏≤‡∏ô Prisma (‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Adapter)
3.  **Cleanup:** ‡∏•‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á `v2_users` ‡∏ó‡∏¥‡πâ‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à

**Next Step:** ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡∏° Dev (‡∏ï‡∏±‡∏ß‡∏ú‡∏°‡πÉ‡∏ô‡∏£‡πà‡∏≤‡∏á Dev) ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥ **Migration Script** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡πâ‡∏≤‡∏¢ 31 ‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏õ V1 ‡πÄ‡∏•‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö? ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö
