# การไหลของการอนุมัติและบทบาทหัวหน้าทีม (Approval Flow & Team Lead Role)
## ระบบการอนุมัติแบบมัลติ-เลเวล (Multi-Level Approval System)

**วันที่:** 2026-01-28
**ภาษา:** ไทย (สำหรับผู้ใช้ทั่วไป)
**รูปแบบ:** คู่มือสำหรับเข้าใจเบื้องต้น

---

## 📋 สารบัญ

1. [ภาพรวมระบบ](#ภาพรวมระบบ)
2. [บทบาทหัวหน้าทีม](#บทบาทหัวหน้าทีม)
3. [ขั้นตอนการไหลของการอนุมัติ](#ขั้นตอนการไหลของการอนุมัติ)
4. [ตัวอย่างสถานการณ์จริง](#ตัวอย่างสถานการณ์จริง)
5. [อำนาจและข้อจำกัดของหัวหน้าทีม](#อำนาจและข้อจำกัดของหัวหน้าทีม)

---

## ภาพรวมระบบ

### ระบบการอนุมัติคืออะไร?

**ระบบการอนุมัติ** คือกระบวนการที่ **ตรวจสอบและอนุมัติงาน** ก่อนที่จะดำเนินการจริง

**ตัวอย่าง:**
- ✅ งานออกแบบต้องอนุมัติจากแพทยจัก มูลค่า 50,000 บาท → ต้องอนุมัติจาก Supervisor + Manager
- ✅ เสนอขอ Cost ใหม่ → ต้องอนุมัติจากกองคน → Manager
- ✅ ขอวันลา → ต้องอนุมัติจากหัวหน้าแผนก → HR

### ระบบสนับสนุนอะไรบ้าง?

| ฟีเจอร์ | คำอธิบาย |
|--------|---------|
| **หลายเลเวล (Multi-Level)** | สามารถตั้งหลายขั้นตอนการอนุมัติได้ |
| **กลุ่มผู้อนุมัติ (Pool)** | แต่ละเลเวลมีกลุ่มผู้อนุมัติให้เลือก |
| **ตรรมชาติ (Logic)** | สามารถตั้งให้ "1 คนอนุมัติก็พอ" หรือ "ต้องครบทุกคน" |
| **อนุมัติผ่านอีเมล** | ผู้อนุมัติสามารถอนุมัติผ่านลิงก์ในอีเมล โดยไม่ต้องเข้าระบบ |
| **หัวหน้าทีมอัตโนมัติ** | เมื่ออนุมัติครบแล้ว สามารถมอบหมายให้หัวหน้าทีมโดยอัตโนมัติ |
| **บันทึกประวัติ** | บันทึกว่าใครอนุมัติเมื่อไร และความเห็น |

---

## บทบาทหัวหน้าทีม

### หัวหน้าทีมคือใคร?

**หัวหน้าทีม (Team Lead)** สามารถเป็นตัวแทนได้ 3 วิธี:

#### วิธีที่ 1: หัวหน้าแผนก (Department Manager)

```
โครงสร้าง:
┌─────────────────────────┐
│  บริษัท (Company)       │
├─────────────────────────┤
│  ฝ่าย A (Department A)   │
│  ├─ หัวหน้าแผนก: มนตรี  │ ← นี่คือ Team Lead
│  ├─ คน 1                │
│  └─ คน 2                │
│                         │
│  ฝ่าย B (Department B)   │
│  ├─ หัวหน้าแผนก: อริญา  │ ← นี่คือ Team Lead
│  ├─ คน 3                │
│  └─ คน 4                │
└─────────────────────────┘
```

**ตั้งค่า:** ไปที่ **การจัดการองค์กร → แผนก** เลือกคน → บันทึก

#### วิธีที่ 2: ตั้งค่าเฉพาะสำหรับโครงการ

```
การไหลของการอนุมัติสำหรับโครงการ "Marketing Campaign"

Approval Flow Settings:
├─ Step 1: Department Manager
├─ Step 2: Director
│
└─ ☑️ อนุญาตให้ Team Lead รับงานอัตโนมัติ
   Team Lead: ทดไทย (สามารถเลือกคนอื่นแทนหัวหน้าแผนก)
```

**ตั้งค่า:** ไปที่ **Approval Flow → เลือกโครงการ → ติ๊กโล่ "อนุญาตให้ Team Lead"**

#### วิธีที่ 3: ระบบจะเลือกเอง (Fallback Chain)

ถ้าไม่ได้ตั้งค่าอะไร ระบบจะเลือกตามลำดับนี้:
```
1. ✓ Team Lead ที่ตั้งไว้เฉพาะโครงการ?
     └─ ใช้คนนี้

2. ✓ หัวหน้าแผนกที่โครงการเป็นสมาชิก?
     └─ ใช้คนนี้

3. ✓ ที่ไหนก็ได้?
     └─ ใช้ Admin / Manager แทน
```

---

### หัวหน้าทีมสามารถทำอะไรได้บ้าง?

#### 1. ✅ **อนุมัติงาน (Approve)**

```
สถานการณ์: หัวหน้าทีม "มนตรี" เห็นว่างานไม่มีปัญหา

ขั้นตอน:
1. เข้าหน้า "คิวการอนุมัติ" (Approvals Queue)
2. ดูงานที่รอการอนุมัติของตัวเอง
3. คลิกปุ่ม "อนุมัติ" (Approve)
4. สามารถเพิ่มความเห็นเสริม
5. คลิก "ยืนยันการอนุมัติ"

ผลลัพธ์:
- งานก้าวหน้าไปยังขั้นตอนต่อไป หรือ
- ถ้าอนุมัติครบแล้ว → มอบหมายให้ทำการจริง
```

#### 2. ❌ **ไม่อนุมัติ / ส่งกลับ (Reject or Return)**

```
สถานการณ์: หัวหน้าทีม "มนตรี" เห็นว่างานมีปัญหา

ตัวเลือก A: ส่งกลับเพื่อแก้ไขเล็กน้อย
├─ ปุ่ม: "ส่งกลับ" (Return)
├─ ความหมาย: เพียงแก้ไขบางอย่างก็ได้
└─ งานกลับไปที่ผู้ขอ เพื่อแก้ไข

ตัวเลือก B: ไม่อนุมัติ
├─ ปุ่ม: "ปฏิเสธ" (Reject)
├─ ความหมาย: ต้องสร้างใหม่ตั้งแต่ต้น
└─ งานกลับไปที่ผู้ขอ เพื่อเริ่มใหม่
```

#### 3. 💬 **เพิ่มความเห็น (Comment)**

```
หัวหน้าทีมสามารถ:
- เขียนความเห็นเสริม
- ถามคำถาม
- ให้ข้อเสนอแนะ

ตัวอย่าง:
"ยอมรับได้ แต่ต้องไม่เกินจำนวน 5 หน่วย
เนื่องจากมีกำลังคนจำกัด"
```

#### 4. 👁️ **ดูรายละเอียด (View Details)**

```
หัวหน้าทีมสามารถดู:
- ข้อมูลงานทั้งหมด
- ไฟล์แนบ
- ประวัติการอนุมัติก่อนหน้า
- ความเห็นของคนอื่น
- วันที่และเวลาส่งงาน
```

#### 5. 📋 **ดูประวัติการอนุมัติ (Approval History)**

```
หัวหน้าทีมสามารถ:
- ดูว่าใครอนุมัติเมื่อไร
- ดูความเห็นของคนอื่น
- ดูวันที่อนุมัติทั้งหมด
```

---

### สิ่งที่หัวหน้าทีมไม่สามารถทำได้

❌ ตั้งค่าการไหลของการอนุมัติ (Admin เท่านั้น)
❌ บังคับให้คนอื่นอนุมัติ (ต้องรอตัวแต่ละคน)
❌ ลบการอนุมัติที่ผ่านไปแล้ว
❌ แก้ไขความเห็นของคนอื่น
❌ ข้ามการอนุมัติขั้นต่อไป

---

## ขั้นตอนการไหลของการอนุมัติ

### ตัวอย่างการไหลแบบ 3 ขั้นตอน

```
โครงการ: "การออกแบบเว็บไซต์ใหม่"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ขั้นตอน 1: ตรวจสอบจากหัวหน้าแผนก (Department Manager)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

   Designer ส่งงาน "ออกแบบหน้าแรก"
              ↓
          [ส่งอีเมล]
              ↓
   หัวหน้าแผนก "มนตรี" ได้รับอีเมล
              ↓
        ⏳ รอการอนุมัติ...
              ↓
        [มนตรี เข้าระบบและอนุมัติ]
              ↓

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ขั้นตอน 2: ตรวจสอบจากไดเรคเตอร์ (Director)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

   [ส่งอีเมล]
              ↓
   ไดเรคเตอร์ "ธีรวัฒน์" ได้รับอีเมล
              ↓
        ⏳ รอการอนุมัติ...
              ↓
        [ธีรวัฒน์ เข้าระบบและอนุมัติ]
              ↓

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ขั้นตอน 3: ตรวจสอบจากผู้จัดการโครงการ (Project Manager)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

   [ส่งอีเมล]
              ↓
   PM "สมนัก" ได้รับอีเมล
              ↓
        ⏳ รอการอนุมัติ...
              ↓
        [สมนัก เข้าระบบและอนุมัติ]
              ↓

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ การอนุมัติครบแล้ว!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

        🎯 ส่งอัตโนมัติให้หัวหน้าทีม
              ↓
        หัวหน้าทีม = "มนตรี" (หัวหน้าแผนก)
              ↓
        ✉️ ส่งอีเมล: "งานของคุณพร้อมที่จะรับได้แล้ว"
              ↓
        [มนตรี รับงานและเริ่มทำการจริง]
              ↓
        ✅ งานเข้าสู่สถานะ "มอบหมายแล้ว"
```

### สถานะงานตลอดการไหล

```
draft              ← สร้างครั้งแรก (ยังไม่ส่ง)
    ↓
submitted          ← ผู้ขอส่งเข้าระบบแล้ว
    ↓
pending_approval   ← รอการอนุมัติขั้นที่ 1
    ↓
[อนุมัติขั้นที่ 1]
    ↓
pending_approval   ← รอการอนุมัติขั้นที่ 2
    ↓
[อนุมัติขั้นที่ 2]
    ↓
pending_approval   ← รอการอนุมัติขั้นที่ 3
    ↓
[อนุมัติขั้นที่ 3]
    ↓
approved           ← อนุมัติครบแล้ว (ยังไม่ได้มอบหมาย)
    ↓
[ส่งให้หัวหน้าทีม]
    ↓
assigned           ← มอบหมายให้ทำการจริงแล้ว
    ↓
in_progress        ← กำลังดำเนินการ
    ↓
completed          ← เสร็จสิ้น
    ↓
closed             ← ปิด
```

**สถานะพิเศษ:**
- `rework` → ต้องแก้ไขเล็กน้อย
- `rejected` → ต้องสร้างใหม่

---

## ตัวอย่างสถานการณ์จริง

### สถานการณ์ที่ 1: ขอเบิกจ่ายค่าอาหารกลางวัน

```
📌 ข้อมูลทั่วไป
คน: สมชัย (Requester)
เรื่อง: ขอเบิกค่าอาหารกลางวัน เดือนมกราคม 2569
จำนวน: 5,000 บาท
วันส่ง: 28 มกราคม 2569

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 การไหลของการอนุมัติ

ขั้นตอน 1: หัวหน้าแผนก
  ├─ ผู้อนุมัติ: มนตรี (หัวหน้าแผนกสมชัย)
  ├─ ความเห็น: "ยอมรับได้ ใช้เป็นอาหารกลางวันจริงๆ"
  └─ สถานะ: ✅ อนุมัติ

ขั้นตอน 2: ผู้จัดการเงิน
  ├─ ผู้อนุมัติ: สรศักดิ์ (Finance Manager)
  ├─ ความเห็น: "ถ้าเป็นอาหารกลางวันต้องตรวจสอบใบเสร็จ"
  └─ สถานะ: ⏳ รอการอนุมัติ

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ สรศักดิ์อนุมัติแล้ว!

ผลลัพธ์: สมชัย ได้รับเงิน 5,000 บาท
```

### สถานการณ์ที่ 2: ขอซื้อห้องสัมมนาทั้งเดือน

```
📌 ข้อมูลทั่วไป
คน: อารินทร์ (Requester)
เรื่อง: ขอจองห้องประชุม ทั้งเดือนกุมภาพันธ์
งบประมาณ: 50,000 บาท
วันส่ง: 28 มกราคม 2569

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 การไหลของการอนุมัติ

ขั้นตอน 1: หัวหน้าแผนก
  ├─ ผู้อนุมัติ: มนตรี
  ├─ สถานะ: ✅ อนุมัติ
  └─ ความเห็น: "เห็นด้วย"

ขั้นตอน 2: ไดเรคเตอร์
  ├─ ผู้อนุมัติ: ธีรวัฒน์ (Director)
  ├─ สถานะ: ⚠️ ส่งกลับแก้ไข
  └─ ความเห็น: "ต้องลดจำนวนวันเป็น 2 สัปดาห์
                   เพราะงบประมาณจำกัด"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔄 [อารินทร์ แก้ไขงบประมาณเป็น 25,000 บาท]

ขั้นตอน 1 (ใหม่): หัวหน้าแผนก
  ├─ ผู้อนุมัติ: มนตรี
  ├─ สถานะ: ✅ อนุมัติ (ครั้งที่ 2)
  └─ ความเห็น: "เห็นด้วย (แบบแก้ไขแล้ว)"

ขั้นตอน 2 (ใหม่): ไดเรคเตอร์
  ├─ ผู้อนุมัติ: ธีรวัฒน์
  ├─ สถานะ: ✅ อนุมัติ
  └─ ความเห็น: "ตกลง เหมาะสมแล้ว"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ การอนุมัติครบแล้ว!

ผลลัพธ์: อารินทร์ ได้รับการจองห้องประชุม
        2 สัปดาห์ (งบประมาณ 25,000 บาท)
```

### สถานการณ์ที่ 3: ขอออกแบบลอโก้ใหม่ (พร้อมหัวหน้าทีมอัตโนมัติ)

```
📌 ข้อมูลทั่วไป
คน: นพชา (Designer)
เรื่อง: ขอออกแบบลอโก้บริษัท
โครงการ: "Brand Refresh 2026"
วันส่ง: 28 มกราคม 2569

📋 การตั้งค่าโครงการ:
├─ Approval Flow:
│  ├─ Step 1: Department Manager
│  ├─ Step 2: Director
│  └─ Step 3: Project Manager
│
└─ ☑️ อนุญาตให้ Team Lead รับงาน (Auto-assign)
   Team Lead: ทดไทย (Senior Designer)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🔄 ขั้นตอนการอนุมัติ

ขั้นตอน 1: หัวหน้าแผนก
  ├─ ผู้อนุมัติ: มนตรี
  ├─ สถานะ: ✅ อนุมัติ
  └─ ความเห็น: "ดีครับ"

ขั้นตอน 2: ไดเรคเตอร์
  ├─ ผู้อนุมัติ: ธีรวัฒน์
  ├─ สถานะ: ✅ อนุมัติ
  └─ ความเห็น: "เห็นด้วย"

ขั้นตอน 3: PM
  ├─ ผู้อนุมัติ: สมนัก
  ├─ สถานะ: ✅ อนุมัติ
  └─ ความเห็น: "ส่งถึง Team Lead ได้แล้ว"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

⚡ อัตโนมัติ: ส่งให้หัวหน้าทีม!

📧 อีเมล: "งานออกแบบลอโก้พร้อมส่งมอบแล้ว"
TO: ทดไทย (Senior Designer / Team Lead)

ทดไทย เข้าระบบและรับงาน
    ↓
สถานะ: "assigned" (มอบหมายแล้ว)
    ↓
ทดไทย เริ่มดำเนินการออกแบบ

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ สรุป:
ผู้ขอ: นพชา
หัวหน้าทีม: ทดไทย (ได้รับอัตโนมัติ)
จำนวนขั้นตอน: 3 (ทั้งหมด)
เวลา: ประมาณ 3 วัน
```

---

## อำนาจและข้อจำกัดของหัวหน้าทีม

### ✅ สิ่งที่หัวหน้าทีมมีอำนาจ

| อำนาจ | ตัวอย่าง |
|------|---------|
| **อนุมัติงาน** | คลิก "อนุมัติ" งานก้าวหน้าไปขั้นต่อไป |
| **ปฏิเสธงาน** | คลิก "ปฏิเสธ" งานกลับไปสร้างใหม่ |
| **ส่งกลับแก้ไข** | คลิก "ส่งกลับ" เพื่อให้ผู้ขอแก้เล็กน้อย |
| **เพิ่มความเห็น** | เขียนความเห็นเพื่อให้ผู้ขอทราบ |
| **ดูรายละเอียด** | ดูไฟล์แนบและข้อมูลทั้งหมด |
| **อนุมัติผ่านอีเมล** | คลิกลิงก์ในอีเมล แล้วอนุมัติ |
| **รับงานอัตโนมัติ** | ถ้าตั้งค่าให้ งานจะส่งมอบโดยอัตโนมัติ |

### ❌ สิ่งที่หัวหน้าทีมไม่มีอำนาจ

| สิ่งที่ไม่สามารถ | เหตุผล |
|--------------|------|
| **ตั้งค่าการไหล** | ต้องเป็น Admin เท่านั้น |
| **เพิ่ม/ลบผู้อนุมัติ** | ต้องจัดการจากหน้า Approval Flow Admin |
| **ข้ามขั้นตอน** | ต้องรอให้คนในแต่ละขั้นตอนอนุมัติ |
| **ลบประวัติ** | เพื่อวัตถุประสงค์ในการตรวจสอบ |
| **แก้ไขงานของคนอื่น** | ต้องผู้ขอแก้ไขเอง |

---

## คำถามที่พบบ่อย (FAQ)

### Q1: ถ้ามี 5 ขั้นตอน แต่ Step 3 ไม่อนุมัติ จะเกิดอะไร?

**A:** งานจะยังคงค้างอยู่ที่ Step 3 ไม่ก้าวหน้า
- สามารถ: ปฏิเสธ, ส่งกลับแก้ไข, หรือดำเนินการจริงหรือไม่ก้าวหน้า
- ผู้ขอ จะได้รับอีเมลว่างานยังค้าง
- ต้องรอ Step 3 อนุมัติ หรือผู้จัดการ override

### Q2: หัวหน้าทีมสามารถแก้ไขงาน ขณะรอการอนุมัติได้ไหม?

**A:** ไม่ได้ เฉพาะ:
1. ผู้ขอสามารถแก้ไขได้
2. หรือต้องปฏิเสธ/ส่งกลับ แล้วผู้ขอแก้ไขใหม่

### Q3: ความหมายของการ "ส่งกลับ" vs "ปฏิเสธ"?

**A:**
- **ส่งกลับ (Return)**: เล็กน้อย ให้แก้ไขและส่งใหม่
- **ปฏิเสธ (Reject)**: มีปัญหาใหญ่ ต้องสร้างใหม่

### Q4: ถ้ามี 2 คนที่ Step 1 และทั้ง 2 คนต้องอนุมัติ จะเกิดอะไร?

**A:** ทั้ง 2 คนต้องอนุมัติ:
1. คนที่ 1 อนุมัติ → ค้างอยู่
2. คนที่ 2 อนุมัติ → ก้าวหน้าไป Step 2
3. ถ้า 1 คนปฏิเสธ → งานกลับไป (ไม่ต้องรอคนที่ 2)

### Q5: หัวหน้าทีมได้รับอัตโนมัติ ต้องทำอะไร?

**A:**
1. ได้รับอีเมลว่า "งานของคุณพร้อมแล้ว"
2. เข้าระบบ
3. ไปหน้า "งานของฉัน" (My Tasks)
4. งานจะมีสถานะ "assigned" (มอบหมายแล้ว)
5. เริ่มดำเนินการหรือเปลี่ยนสถานะตามที่ต้อง

---

## แผนภาพสรุป

### การไหลแบบง่าย ๆ

```
      ผู้ขอ (Requester)
            │
            ├─► ส่งงาน
            │
            ▼
   ┌─────────────────┐
   │  Step 1: Manager  │  ← ได้รับอีเมล
   │  ✓ อนุมัติ        │
   └────────┬────────┘
            │
            ▼
   ┌─────────────────┐
   │  Step 2: Director │  ← ได้รับอีเมล
   │  ✓ อนุมัติ        │
   └────────┬────────┘
            │
            ▼
   ┌─────────────────┐
   │  Step 3: PM       │  ← ได้รับอีเมล
   │  ✓ อนุมัติ        │
   └────────┬────────┘
            │
            ▼
   ┏━━━━━━━━━━━━━━━━━┓
   ┃ อนุมัติครบแล้ว! ┃
   ┗━━━━━━━┬━━━━━━━━┛
            │
            ├─► [ตั้งค่าให้หัวหน้าทีมรับ]
            │     │
            │     └─► หัวหน้าทีม ได้รับอัตโนมัติ
            │         สถานะ: "assigned"
            │
            └─► [ตั้งค่าไม่ให้หัวหน้าทีมรับ]
                  │
                  └─► รอการมอบหมายแบบ Manual
                      สถานะ: "approved"
```

---

## สรุปเนื้อหา

### หัวหน้าทีมเป็นใคร?
- **หัวหน้าแผนก** หรือ
- **คนที่ตั้งค่าเฉพาะสำหรับโครงการ**

### หัวหน้าทีมสามารถทำอะไร?
1. ✅ **อนุมัติ** งานก้าวหน้าไป
2. ❌ **ปฏิเสธ** งานกลับไป
3. ⚠️ **ส่งกลับ** เพื่อแก้เล็กน้อย
4. 💬 **เพิ่มความเห็น** และข้อเสนอแนะ
5. 👁️ **ดูรายละเอียด** งานทั้งหมด
6. 📬 **รับอัตโนมัติ** (ถ้าตั้งค่าให้)

### สิ่งสำคัญ
- **อนุญาต** ให้หัวหน้าทีมรับอัตโนมัติ = เมื่ออนุมัติครบแล้ว งานจะส่งให้หัวหน้าทีมโดยไม่ต้องรอ
- **ไม่อนุญาต** = งานรอการมอบหมายแบบ Manual
- หัวหน้าทีมสามารถ **อนุมัติผ่านอีเมล** โดยไม่ต้องเข้าระบบ

---

## ติดต่อสอบถาม

ถ้ามีคำถาม สามารถติดต่อ:
- **Admin**: เพื่อตั้งค่าการไหลและหัวหน้าทีม
- **IT Support**: เพื่อขอความช่วยเหลือด้านระบบ
- **Manager**: เพื่ออนุมัติงาน

---

*เอกสารนี้เขียนเพื่อการเข้าใจเบื้องต้นเกี่ยวกับระบบการอนุมัติและบทบาทหัวหน้าทีม*
*สำหรับรายละเอียดเพิ่มเติม โปรดดูคู่มือฉบับเต็มหรือติดต่อทีม IT*
