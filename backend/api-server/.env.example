# ==========================================
# DJ System API Server Configuration
# Copy this file to .env and update values
# ==========================================

# Server Environment
NODE_ENV=development

# Port Configuration
PORT=3000
API_PORT=3001

# Frontend URL (for CORS)
FRONTEND_URL=http://localhost:5173

# JWT Secret (CHANGE THIS IN PRODUCTION!)
JWT_SECRET=your-super-secret-key-change-me-in-production-12345

# Socket.io Configuration
SOCKET_PORT=3000
SOCKET_TRANSPORTS=websocket,polling

# ==========================================
# Database Configuration
# ==========================================

# Development (Local PostgreSQL)
# DATABASE_URL=postgresql://postgres:password@localhost:5432/dj_system

# UAT (Supabase)
DATABASE_URL=postgresql://postgres.[YOUR-PASSWORD]:[YOUR-PASSWORD]@aws-0-ap-southeast-1.pooler.supabase.com:6543/postgres

# Production (On-premise PostgreSQL)
# DATABASE_URL=postgresql://postgres:password@localhost:5432/dj_system

# CORS Origins (comma-separated, no spaces)
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:3001

# Logging Level
LOG_LEVEL=debug

# ==========================================
# Email Service Configuration
# ==========================================

EMAIL_API_URL=http://localhost:3001
EMAIL_API_KEY=your-secret-api-key-here

# Email Configuration (for future use)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@dj-system.com

# ==========================================
# Supabase Configuration (Optional)
# ==========================================

# Supabase Project URL (for direct API access)
SUPABASE_URL=https://[YOUR-PROJECT-ID].supabase.co

# Supabase Service Role Key (for backend operations)
SUPABASE_SERVICE_ROLE_KEY=[YOUR-SERVICE-ROLE-KEY]

# Supabase Storage Bucket (for file uploads)
SUPABASE_STORAGE_BUCKET=dj-system-files

# ==========================================
# Redis Configuration (for future scaling)
# ==========================================

# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=

# ==========================================
# API Keys (for external services)
# ==========================================

# API_KEY=your-api-key-here

# ==========================================
# Job Chaining Configuration
# ==========================================

# Maximum depth for sequential job chains (A→B→C, max 3)
MAX_CHAIN_DEPTH=3

# Enable full transitive chaining (follow entire chain)
ENABLE_FULL_TRANSITIVE=true

# Prevent self-chaining (A → A)
PREVENT_SELF_CHAIN=true

# Enable circular reference detection
ENABLE_CYCLE_DETECTION=true

# Days to shift when Urgent job is created
URGENT_SHIFT_DAYS=2

# Enable rescheduling when Urgent job is approved
ENABLE_URGENT_RESCHEDULE=true

# Enable notifications when job in chain completes
ENABLE_CHAIN_NOTIFICATIONS=true

# ==========================================
# Notification Batching Configuration
# ==========================================

# Comment notification batch delay (milliseconds)
# When multiple comments are posted in quick succession, they are grouped into
# a single notification instead of spamming the user
# Default: 30000 (30 seconds)
COMMENT_BATCH_DELAY_MS=30000

# ==========================================
# Feature Flags
# ==========================================

ENABLE_NOTIFICATIONS=true
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_RATE_LIMITING=false

# ==========================================
# Environment Detection
# ==========================================

# Auto-detect environment (development/uat/production)
# ENVIRONMENT=development
